## createApp()

`createApp`æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨å®ä¾‹ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ ¹ç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåº”ç”¨å®ä¾‹ï¼Œåœ¨æ¯ä¸ªé¡¹ç›®ä¸­ä½ éƒ½èƒ½çœ‹åˆ°

- ç±»å‹ï¼š

```ts
function createApp(rootComponent: Component, rootProps?: object): App
```

æºç ä½äºé¡¹ç›®[`packages/runtime-dom/src/index.ts`](https://github.com/vuejs/core/blob/main/packages/runtime-dom/src/index.ts)çš„65è¡Œï¼š

```ts
export const createApp = ((...args) => {
  /* è¿™æ˜¯é‡ç‚¹ï¼š
   * ensureRendereræ˜¯ç”¨äºè·å–æ¸²æŸ“å™¨ï¼Œå¦‚æœæ²¡æœ‰ä¼šå°è¯•åˆ›å»ºä¸€ä¸ªæ¸²æŸ“å™¨ 
   * è¿”å›rendereræˆ–è€…createRenderer
   * createRendererè¿”å›baseCreateRenderer
   * æœ€ç»ˆè¿”å›app
  */
  const app = ensureRenderer().createApp(...args)

  if (__DEV__) {
    //injectNativeTagCheckå‡½æ•°ç”¨äºæ³¨å…¥åŸç”Ÿæ ‡ç­¾æ£€æŸ¥
    injectNativeTagCheck(app)
    //injectCompilerOptionsCheckå‡½æ•°ç”¨äºæ³¨å…¥ç¼–è¯‘å™¨é€‰é¡¹æ£€æŸ¥
    injectCompilerOptionsCheck(app)
  }

  // è·å–appé‡Œé¢çš„mount
  const { mount } = app
  // é€šè¿‡é‡å†™ app.mount æ–¹æ³•ï¼Œå¯ä»¥å¯¹ mount æ–¹æ³•è¿›è¡Œè‡ªå®šä¹‰å®ç°ï¼Œä»¥é€‚åº”ä¸åŒçš„å¹³å°å’Œéœ€æ±‚ã€‚
  app.mount = (containerOrSelector: Element | ShadowRoot | string): any => {
    // normalizeContainer å‡½æ•°çš„ä½œç”¨æ˜¯å°†ä¼ å…¥çš„å®¹å™¨å‚æ•°æ ‡å‡†åŒ–ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„ DOM å…ƒç´ 
    const container = normalizeContainer(containerOrSelector)
    // æ²¡æœ‰domå°±æ˜¯ç™½å±
    if (!container) return

    // app._componentå®ƒè¡¨ç¤ºåº”ç”¨å®ä¾‹çš„æ ¹ç»„ä»¶ã€‚æ ¹ç»„ä»¶æ˜¯åº”ç”¨ä¸­æœ€é¡¶å±‚çš„ç»„ä»¶ï¼Œå®ƒåŒ…å«å…¶ä»–ç»„ä»¶ï¼Œå¹¶è´Ÿè´£æ•´ä¸ªåº”ç”¨çš„æ¸²æŸ“å’Œé€»è¾‘
    const component = app._component
    // ç”¨äºåˆ¤æ–­æ ¹ç»„ä»¶æ˜¯å¦å…·æœ‰å¯ç”¨çš„æ¸²æŸ“å‡½æ•°æˆ–æ¨¡æ¿
    if (!isFunction(component) && !component.render && !component.template) {
      // __UNSAFE__
      // Reason: potential execution of JS expressions in in-DOM template.
      // The user must make sure the in-DOM template is trusted. If it's
      // rendered by the server, the template should not contain any user data.
      component.template = container.innerHTML
      // 2.x compat check
      if (__COMPAT__ && __DEV__) {
        for (let i = 0; i < container.attributes.length; i++) {
          const attr = container.attributes[i]
          if (attr.name !== 'v-cloak' && /^(v-|:|@)/.test(attr.name)) {
            compatUtils.warnDeprecation(
              DeprecationTypes.GLOBAL_MOUNT_CONTAINER,
              null
            )
            break
          }
        }
      }
    }

    // clear content before mounting
    container.innerHTML = ''
    // mount(container, false, container instanceof SVGElement) æ–¹æ³•æ¥å°†ç»„ä»¶æŒ‚è½½åˆ°å®¹å™¨
    // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å®¹å™¨å…ƒç´ 
    // ç¬¬äºŒä¸ªå‚æ•° false è¡¨ç¤ºä¸è¿›è¡Œæ¿€æ´»ï¼ˆactivateï¼‰æ“ä½œ
    // ç¬¬ä¸‰ä¸ªå‚æ•° container instanceof SVGElement è¡¨ç¤ºå®¹å™¨æ˜¯å¦ä¸º SVG å…ƒç´ ã€‚
    const proxy = mount(container, false, container instanceof SVGElement)
    if (container instanceof Element) {
      //å¦‚æœå®¹å™¨æ˜¯ä¸€ä¸ªæ™®é€šçš„ HTML å…ƒç´  ç§»é™¤ v-cloak å±æ€§å’Œè®¾ç½® data-v-app å±æ€§
      container.removeAttribute('v-cloak')
      container.setAttribute('data-v-app', '')
    }
    // è¿”å›ä»£ç†å¯¹è±¡
    return proxy
  }

  return app
}) as CreateAppFunction<Element>
```



## createSSRApp()

ä»¥[`SSR æ¿€æ´»æ¨¡å¼`](https://cn.vuejs.org/guide/scaling-up/ssr.html#client-hydration)åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚ç”¨æ³•ä¸ createApp() å®Œå…¨ç›¸åŒã€‚


- `ssr`å¯ä»¥ç†è§£ä¸ºå°†ç»„ä»¶åœ¨æœåŠ¡ç«¯ç›´æ¥æ¸²æŸ“æˆ HTML å­—ç¬¦ä¸²ï¼Œä½œä¸ºæœåŠ¡ç«¯å“åº”è¿”å›ç»™æµè§ˆå™¨ï¼Œæœ€ååœ¨æµè§ˆå™¨ç«¯å°†é™æ€çš„ `HTML`â€œæ¿€æ´»â€(`hydrate`) ä¸ºèƒ½å¤Ÿäº¤äº’çš„å®¢æˆ·ç«¯åº”ç”¨ã€‚

::: tip TIP ğŸ³
æˆªè‡³ç›®å‰ï¼Œ`Google` å’Œ `Bing` å¯ä»¥å¾ˆå¥½åœ°å¯¹åŒæ­¥ `JavaScript` åº”ç”¨è¿›è¡Œç´¢å¼•ã€‚è¿™é‡Œçš„â€œåŒæ­¥â€æ˜¯å…³é”®è¯ã€‚å¦‚æœä½ çš„åº”ç”¨ä»¥ä¸€ä¸ª `loading` åŠ¨ç”»å¼€å§‹ï¼Œç„¶åé€šè¿‡ `Ajax` è·å–å†…å®¹ï¼Œçˆ¬è™«å¹¶ä¸ä¼šç­‰åˆ°å†…å®¹åŠ è½½å®Œæˆå†æŠ“å–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ `SEO` å¯¹ä½ çš„é¡µé¢è‡³å…³é‡è¦ï¼Œè€Œä½ çš„å†…å®¹åˆæ˜¯å¼‚æ­¥è·å–çš„ï¼Œé‚£ä¹ˆ `SSR` å¯èƒ½æ˜¯å¿…éœ€çš„ã€‚
:::


```ts
export const createSSRApp = ((...args) => {
  /** 
   * è¯¥å‡½æ•°ç”¨äºåœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ—¶ç¡®ä¿åˆ›å»ºæˆ–è·å–ä¸å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰åŒæ­¥çš„æ¸²æŸ“å™¨ã€‚ 
   * åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ï¼Œéœ€è¦å°†ç»„ä»¶çš„åˆå§‹ HTML å†…å®¹å‘é€åˆ°å®¢æˆ·ç«¯
   * å¹¶åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ¿€æ´»ï¼ˆhydrateï¼‰ä»¥ä¿æŒä¸æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ä¸€è‡´æ€§ã€‚
   */
  const app = ensureHydrationRenderer().createApp(...args)

  if (__DEV__) {
    injectNativeTagCheck(app)
    injectCompilerOptionsCheck(app)
  }

  const { mount } = app
  app.mount = (containerOrSelector: Element | ShadowRoot | string): any => {
    const container = normalizeContainer(containerOrSelector)
    if (container) {
      return mount(container, true, container instanceof SVGElement)
    }
  }

  return app
}) as CreateAppFunction<Element>
```

## app.mount()

å°†åº”ç”¨å®ä¾‹æŒ‚è½½åœ¨ä¸€ä¸ªå®¹å™¨å…ƒç´ ä¸­ã€‚

- ç±»å‹

```ts
interface App {
  mount(rootContainer: Element | string): ComponentPublicInstance
}
```

å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå®é™…çš„ `DOM` å…ƒç´ æˆ–ä¸€ä¸ª `CSS` é€‰æ‹©å™¨ (ä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„å…ƒç´ )ã€‚è¿”å›æ ¹ç»„ä»¶çš„å®ä¾‹ã€‚

å¦‚æœè¯¥ç»„ä»¶æœ‰æ¨¡æ¿æˆ–å®šä¹‰äº†æ¸²æŸ“å‡½æ•°ï¼Œå®ƒå°†æ›¿æ¢å®¹å™¨å†…æ‰€æœ‰ç°å­˜çš„ `DOM` èŠ‚ç‚¹ã€‚å¦åˆ™åœ¨è¿è¡Œæ—¶ç¼–è¯‘å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œå®¹å™¨å…ƒç´ çš„ `innerHTML` å°†è¢«ç”¨ä½œæ¨¡æ¿ã€‚

åœ¨ `SSR` æ¿€æ´»æ¨¡å¼ä¸‹ï¼Œå®ƒå°†æ¿€æ´»å®¹å™¨å†…ç°æœ‰çš„ `DOM` èŠ‚ç‚¹ã€‚å¦‚æœå‡ºç°äº†æ¿€æ´»ä¸åŒ¹é…ï¼Œé‚£ä¹ˆç°æœ‰çš„ `DOM` èŠ‚ç‚¹å°†ä¼šè¢«ä¿®æ”¹ä»¥åŒ¹é…å®¢æˆ·ç«¯çš„å®é™…æ¸²æŸ“ç»“æœã€‚

å¯¹äºæ¯ä¸ªåº”ç”¨å®ä¾‹ï¼Œ`mount()` ä»…èƒ½è°ƒç”¨ä¸€æ¬¡ã€‚

å®ä¾‹ï¼š

```ts
import { createApp } from 'vue'
const app = createApp(/* ... */)

app.mount('#app')
```

ä¹Ÿå¯ä»¥æŒ‚è½½åˆ°ä¸€ä¸ªå®é™…çš„ DOM å…ƒç´ ã€‚

```ts
app.mount(document.body.firstChild)
```


## app.unmount()
## app.component()
## app.directive()
## app.use()
## app.mixin()
## app.provide()
## app.runWithContext()
## app.version
## app.config
## app.config.errorHandler
## app.config.warnHandler
## app.config.performance
## app.config.compilerOptions
## app.config.globalProperties
## app.config.optionMergeStrategies